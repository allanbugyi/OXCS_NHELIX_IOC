
record(mbbi, "$(P)$(Q):RUNMODE") {
  field(DESC, "Run Mode")
  field(DTYP, "Raw Soft Channel")
  field(PINI, "YES")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(FRVL, "4")
  field(FVVL, "5")
  field(SXVL, "6")
  field(ZRST, "Startup")
  field(ONST, "Startup Fail")
  field(TWST, "Startup OK")
  field(THST, "Run")
  field(FRST, "Setup")
  field(FVST, "Shutdown OK")
  field(SXST, "Shutdown Fail")
}

record(ai, "$(P)$(Q):RAMPRATE") {
  field(DESC, "Ramp Rate")
  field(DTYP, "Raw Soft Channel")
  field(PINI, "YES")
  field(EGU, "K/hour")
}

record(ai, "$(P)$(Q):TARGETTEMP") {
  field(DESC, "Target Temperature")
  field(DTYP, "Raw Soft Channel")
  field(PINI, "YES")
  field(LINR, "LINEAR")
  field(ESLO, "0.01")
  field(EOFF, "0")
  field(PREC, "2")
  field(EGU, "K")
}

record(ai, "$(P)$(Q):EVAPTEMP") {
  field(DESC, "Evap Temperature")
  field(DTYP, "Raw Soft Channel")
  field(PINI, "YES")
  field(LINR, "LINEAR")
  field(ESLO, "0.01")
  field(EOFF, "0")
  field(PREC, "2")
  field(EGU, "K")
}

record(ai, "$(P)$(Q):SUCTTEMP") {
  field(DESC, "Suct Temperature")
  field(DTYP, "Raw Soft Channel")
  field(PINI, "YES")
  field(LINR, "LINEAR")
  field(ESLO, "0.01")
  field(EOFF, "0")
  field(PREC, "2")
  field(EGU, "K")
}

record(ai, "$(P)$(Q):REMAINING") {
  field(DESC, "Time Remaining in Phase")
  field(DTYP, "Raw Soft Channel")
  field(PINI, "YES")
  field(EGU, "min")
}

record(ai, "$(P)$(Q):GASFLOW") {
  field(DESC, "Gas Flow")
  field(DTYP, "Raw Soft Channel")
  field(PINI, "YES")
  field(LINR, "LINEAR")
  field(ESLO, "0.1")
  field(EOFF, "0")
  field(PREC, "1")
  field(EGU, "l/min")
}

record(ai, "$(P)$(Q):GASHEAT") {
  field(DESC, "Gas Heater")
  field(DTYP, "Raw Soft Channel")
  field(PINI, "YES")
  field(EGU, "%")
}

record(ai, "$(P)$(Q):EVAPHEAT") {
  field(DESC, "Evap Heater")
  field(DTYP, "Raw Soft Channel")
  field(PINI, "YES")
  field(EGU, "%")
}

record(ai, "$(P)$(Q):SUCTHEAT") {
  field(DESC, "Suct Heater")
  field(DTYP, "Raw Soft Channel")
  field(PINI, "YES")
  field(EGU, "%")
}

record(mbbi, "$(P)$(Q):CRYOSTATUS") {
  field(DESC, "Cryo Status")
  field(DTYP, "Raw Soft Channel")
  field(PINI, "YES")
  field(ZRVL, "128")
  field(ONVL, "64")
  field(TWVL, "32")
  field(THVL, "16")
  field(FRVL, "8")
  field(FVVL, "4")
  field(SXVL, "254")
  field(ZRST, "STATUS_ACTIVATED")
  field(ONST, "STATUS_HIGH_TEMP_WARNING")
  field(TWST, "STATUS_HIGH_TEMP_TRIP")
  field(THST, "STATUS_LOW_PRESSURE_WARN")
  field(FRST, "STATUS_MANUAL")
  field(FVST, "STATUS_START")
  field(SXST, "UNDEFINED")
}

record(ai, "$(P)$(Q):RUNTIME") {
  field(DESC, "Pump Uptime")
  field(DTYP, "Raw Soft Channel")
  field(PINI, "YES")
  field(EGU, "min")
}

record(ai, "$(P)$(Q):CTRLNUM") {
  field(DESC, "Controller Number")
  field(DTYP, "Raw Soft Channel")
  field(PINI, "YES")
}

record(ai, "$(P)$(Q):VER") {
  field(DESC, "Software Version")
  field(DTYP, "Raw Soft Channel")
  field(PINI, "YES")
}

record(ai, "$(P)$(Q):EVAPADJUST") {
  field(DESC, "Evap Vacuum Compensation")
  field(DTYP, "Raw Soft Channel")
  field(PINI, "YES")
}

record(ai, "$(P)$(Q):TOTALHOURS")
{
  field(DESC, "Total hours run")
  field(DTYP, "Raw Soft Channel")
  field(PINI, "YES")
  field(EGU, "hours")
}

record(ai, "$(P)$(Q):LEVEL") {
  field(DESC, "Liquid Nitrogen Level")
  field(DTYP, "Raw Soft Channel")
  field(EGU,  "%")
  field(PINI, "YES")
}

record(ai, "$(P)$(Q):STATUS") {
  field(SCAN, ".5 second")
  field(DTYP, "stream")
  field(VAL, "1")
  field(INP, "@OXCS_NHELIX.proto read($(P)$(Q)) $(PORT)")
  field(SDIS, "$(P)$(Q):DISABLE")  
}

record(ao, "$(P)$(Q):RESTART") {
  field(DESC, "Start/Restart program")
  field(DTYP, "stream")
  field(OUT, "@OXCS_NHELIX.proto restart($(P)$(Q)) $(PORT)")
  field(SDIS, "$(P)$(Q):DISABLE")
}

record(ao, "$(P)$(Q):RAMP") {
  field(DESC, "Start a ramp")
  field(DTYP, "stream")
  field(OUT, "@OXCS_NHELIX.proto ramp($(P)$(Q)) $(PORT)")
  field(SDIS, "$(P)$(Q):DISABLE")
}

record(ao, "$(P)$(Q):RRATE") {
  field(DESC, "Set Ramp Rate")
  field(DTYP, "Raw Soft Channel")
  field(PINI, "YES")
  field(EGU, "K/hour")
  field(DRVL, "1")
  field(DRVH, "360")
  field(VAL, "360")
  field(FLNK, "$(P)$(Q):RRATECH")
}

record(ao, "$(P)$(Q):PLAT") {
  field(DESC, "Start a plat")
  field(DTYP, "stream")
  field(OUT, "@OXCS_NHELIX.proto plat($(P)$(Q)) $(PORT)")
  field(SDIS, "$(P)$(Q):DISABLE")
}

record(ao, "$(P)$(Q):PTIME") {
  field(DESC, "Plat Time")
  field(DTYP, "Raw Soft Channel")
  field(PINI, "YES")
  field(EGU, "min")
  field(DRVL, "1")
  field(DRVH, "1440")
  field(FLNK, "$(P)$(Q):PTIMECH")
}

record(ao, "$(P)$(Q):HOLD") {
  field(DESC, "Start a hold")
  field(DTYP, "stream")
  field(OUT, "@OXCS_NHELIX.proto hold($(P)$(Q)) $(PORT)")
  field(SDIS, "$(P)$(Q):DISABLE")
}

record(ao, "$(P)$(Q):COOL") {
  field(DESC, "Start a cool")
  field(DTYP, "stream")
  field(OUT, "@OXCS_NHELIX.proto cool($(P)$(Q)) $(PORT)")
  field(SDIS, "$(P)$(Q):DISABLE")
}

record(ao, "$(P)$(Q):CTEMP") {
  field(DESC, "Cool Temp")
  field(DTYP, "Raw Soft Channel")
  field(PINI, "YES")
  field(LINR, "LINEAR")
  field(ESLO, "0.01")
  field(EOFF, "0")
  field(PREC, "2")
  field(EGU, "K")
  field(DRVL, "80.00")
  field(DRVH, "327.67")
  field(FLNK, "$(P)$(Q):CTEMPCH")
}

record(ao, "$(P)$(Q):ERATE") {
  field(DESC, "Set End Rate")
  field(DTYP, "Raw Soft Channel")
  field(PINI, "YES")
  field(EGU, "K/hour")
  field(DRVL, "1")
  field(VAL, "360")
  field(DRVH, "360")
  field(FLNK, "$(P)$(Q):ERATECH")
}

record(ao, "$(P)$(Q):PURGE") {
  field(DESC, "Start a Purge/Warm")
  field(DTYP, "stream")
  field(OUT, "@OXCS_NHELIX.proto purge($(P)$(Q)) $(PORT)")
  field(SDIS, "$(P)$(Q):DISABLE")
}

record(ao, "$(P)$(Q):PAUSE") {
  field(DESC, "Pause program")
  field(DTYP, "stream")
  field(OUT, "@OXCS_NHELIX.proto pause($(P)$(Q)) $(PORT)")
  field(SDIS, "$(P)$(Q):DISABLE")
}

record(ao, "$(P)$(Q):RESUME") {
  field(DESC, "Resume program")
  field(DTYP, "stream")
  field(OUT, "@OXCS_NHELIX.proto resume($(P)$(Q)) $(PORT)")
  field(SDIS, "$(P)$(Q):DISABLE")
}

record(ao, "$(P)$(Q):STOP") {
  field(DESC, "Stop program")
  field(DTYP, "stream")
  field(OUT, "@OXCS_NHELIX.proto stop($(P)$(Q)) $(PORT)")
  field(SDIS, "$(P)$(Q):DISABLE")
}

record(ao, "$(P)$(Q):FORCEHE"){
  field(DESC, "Force Helium")
  field(DTYP, "stream")
  field(OUT, "@OXCS_NHELIX.proto forcehe($(P)$(Q)) $(PORT)")
  field(SDIS, "$(P)$(Q):DISABLE")
}

record(ao, "$(P)$(Q):RTEMPH") {
  field(DESC, "Ramp Target Temp Hi byte")
  field(DTYP, "Raw Soft Channel")
}

record(ao, "$(P)$(Q):RTEMPL") {
  field(DESC, "Ramp Target Temp Lo byte")
  field(DTYP, "Raw Soft Channel")
}

record(calcout, "$(P)$(Q):RTEMPCH") {
  field(CALC, "(A>>8>=C)?A>>8-C:A>>8")
  field(INPA, "$(P)$(Q):RTEMP.RVAL")
  field(INPC, "128")
  field(OUT, "$(P)$(Q):RTEMPH PP")
  field(FLNK, "$(P)$(Q):RTEMPCL")
}

record(calcout, "$(P)$(Q):RTEMPCL") {
  field(CALC, "(A%B>=C)?A%B-B:A%B")
  field(INPA, "$(P)$(Q):RTEMP.RVAL")
  field(INPB, "256")
  field(INPC, "128")
  field(OUT, "$(P)$(Q):RTEMPL PP")
}

record(calcout, "$(P)$(Q):RRATECH") {
  field(CALC, "(A>>8>=C)?A>>8-C:A>>8")
  field(INPA, "$(P)$(Q):RRATE.RVAL")
  field(INPC, "128")
  field(OUT, "$(P)$(Q):RRATEH.VAL PP")
  field(FLNK, "$(P)$(Q):RRATECL")
}

record(ao, "$(P)$(Q):RRATEH") {
  field(DESC, "Ramp Target Temp Hi byte")
  field(DTYP, "Raw Soft Channel")
}

record(ao, "$(P)$(Q):RRATEL") {
  field(DESC, "Ramp Target Temp Lo byte")
  field(DTYP, "Raw Soft Channel")
}

record(calcout, "$(P)$(Q):RRATECL") {
  field(CALC, "(A%B>=C)?A%B-B:A%B")
  field(INPA, "$(P)$(Q):RRATE.RVAL")
  field(INPB, "256")
  field(INPC, "128")
  field(OUT, "$(P)$(Q):RRATEL.VAL PP")
}

record(calcout, "$(P)$(Q):ERATECH") {
  field(CALC, "(A>>8>=C)?A>>8-C:A>>8")
  field(INPA, "$(P)$(Q):ERATE.RVAL")
  field(INPC, "128")
  field(OUT, "$(P)$(Q):ERATEH.VAL PP")
  field(FLNK, "$(P)$(Q):ERATECL")
}

record(calcout, "$(P)$(Q):ERATECL") {
  field(CALC, "(A%B>=C)?A%B-B:A%B")
  field(INPA, "$(P)$(Q):ERATE.RVAL")
  field(INPB, "256")
  field(INPC, "128")
  field(OUT, "$(P)$(Q):ERATEL.VAL PP")
}

record(ao, "$(P)$(Q):ERATEH") {
  field(DESC, "Ramp Target Temp Hi byte")
  field(DTYP, "Raw Soft Channel")
}

record(ao, "$(P)$(Q):ERATEL") {
  field(DESC, "Ramp Target Temp Lo byte")
  field(DTYP, "Raw Soft Channel")
}

record(calcout, "$(P)$(Q):PTIMECH") {
  field(CALC, "(A>>8>=C)?A>>8-C:A>>8")
  field(INPA, "$(P)$(Q):PTIME.RVAL")
  field(INPC, "128")
  field(OUT, "$(P)$(Q):PTIMEH.VAL PP")
  field(FLNK, "$(P)$(Q):PTIMECL")
}

record(calcout, "$(P)$(Q):PTIMECL") {
  field(CALC, "(A%B>=C)?A%B-B:A%B")
  field(INPA, "$(P)$(Q):PTIME.RVAL")
  field(INPB, "256")
  field(INPC, "128")
  field(OUT, "$(P)$(Q):PTIMEL.VAL PP")
}

record(ao, "$(P)$(Q):PTIMEL") {
  field(DESC, "Ramp Target Temp Lo byte")
  field(DTYP, "Raw Soft Channel")
}

record(ao, "$(P)$(Q):PTIMEH") {
  field(DESC, "Ramp Target Temp Hi byte")
  field(DTYP, "Raw Soft Channel")
}

record(calcout, "$(P)$(Q):CTEMPCH") {
  field(CALC, "(A>>8>=C)?A>>8-C:A>>8")
  field(INPA, "$(P)$(Q):CTEMP.RVAL")
  field(INPC, "128")
  field(OUT, "$(P)$(Q):CTEMPH.VAL PP")
  field(FLNK, "$(P)$(Q):CTEMPCL")
}

record(calcout, "$(P)$(Q):CTEMPCL") {
  field(CALC, "(A%B>=C)?A%B-B:A%B")
  field(INPA, "$(P)$(Q):CTEMP.RVAL")
  field(INPB, "256")
  field(INPC, "128")
  field(OUT, "$(P)$(Q):CTEMPL.VAL PP")
}

record(ao, "$(P)$(Q):CTEMPL") {
  field(DESC, "Ramp Target Temp Lo byte")
  field(DTYP, "Raw Soft Channel")
}

record(ao, "$(P)$(Q):CTEMPH") {
  field(DESC, "Ramp Target Temp Hi byte")
  field(DTYP, "Raw Soft Channel")
}

record(ai, "$(P)$(Q):SETPOINT") {
  field(DESC, "Set Point")
  field(DTYP, "Raw Soft Channel")
  field(PINI, "YES")
  field(LINR, "LINEAR")
  field(ESLO, "0.01")
  field(EOFF, "0")
  field(PREC, "2")
  field(EGU, "K")
}

record(ai, "$(P)$(Q):TEMP") {
  field(DESC, "Current Temperature")
  field(DTYP, "Raw Soft Channel")
  field(PINI, "YES")
  field(LINR, "LINEAR")
  field(ESLO, "0.01")
  field(EOFF, "0")
  field(PREC, "2")
  field(EGU, "K")
}

record(ai, "$(P)$(Q):ERROR") {
  field(DESC, "Error")
  field(DTYP, "Raw Soft Channel")
  field(PINI, "YES")
  field(LINR, "LINEAR")
  field(ESLO, "0.01")
  field(EOFF, "0")
  field(PREC, "2")
  field(EGU, "K")
}

record(genSub, "$(P)$(Q):ALARM") {
  field(DESC, "Alarm Status")
  field(INPA, "$(P)$(Q):ALARMI.RVAL")
  field(FTA, "LONG")
  field(FTVA, "STRING")
  field(SNAM, "alarmlookupProcess")
}

record(ai, "$(P)$(Q):ALARMI") {
  field(DESC, "Alarm number")
  field(DTYP, "Raw Soft Channel")
  field(PINI, "YES")
  field(HIGH, "1")
  field(HSV,  "MAJOR")
  field(FLNK, "$(P)$(Q):ALARM")
}

record(bo, "$(P)$(Q):DISABLE") {
  field(DESC, "Disable comms")
  field(PINI, "YES")
  field(VAL,  "$(DISABLE_COMMS=1)")
  field(OMSL, "supervisory")
  field(ZNAM, "Enabled")
  field(ONAM, "Disabled")
}

record(mbbi, "$(P)$(Q):PHASE") {
  field(DESC, "Phase ID")
  field(DTYP, "Raw Soft Channel")
  field(PINI, "YES")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(FRVL, "4")
  field(FVVL, "5")
  field(SXVL, "6")
  field(SVVL, "7")
  field(EIVL, "8")
  field(NIVL, "9")
  field(TEVL, "10")
  field(ELVL, "254")
  field(ZRST, "Ramp")
  field(ONST, "Cool")
  field(TWST, "Plat")
  field(THST, "Hold")
  field(FRST, "End")
  field(FVST, "Purge")
  field(SXST, "Delete Phase")
  field(SVST, "Load Program")
  field(EIST, "Save Program")
  field(NIST, "Soak")
  field(TEST, "Wait")
  field(ELST, "Undef.- Check RUNMODE")
}

record(ai, "$(P)$(Q):BACKPRESS") {
  field(DESC, "Back Pressure")
  field(DTYP, "Raw Soft Channel")
  field(PINI, "YES")
  field(LINR, "LINEAR")
  field(ESLO, "0.01")
  field(EOFF, "0")
  field(PREC, "2")
  field(EGU, "bar")
}

record(mbbi, "$(P)$(Q):DETGASTYPE") {
  field(DESC, "Detected Gas Type")
  field(DTYP, "Raw Soft Channel")
  field(PINI, "YES")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(ZRST, "No gas detected")
  field(ONST, "N2 detected")
  field(TWST, "He detected")
}

record(mbbi, "$(P)$(Q):SELGASTYPE"){
  field(DESC, "Selected Gas Type")
  field(DTYP, "Raw Soft Channel")
  field(PINI, "YES")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(ZRST, "N2 - System select")
  field(ONST, "He - User select")
  field(TWST, "He - System select")
}

record(ao, "$(P)$(Q):RTEMP") {
  field(DESC, "Ramp Target Temp")
  field(DTYP, "Raw Soft Channel")
  field(PINI, "YES")
  field(LINR, "LINEAR")
  field(ESLO, "0.01")
  field(EOFF, "0")
  field(PREC, "2")
  field(EGU, "K")
  field(DRVL, "20.00")
  field(DRVH, "320.00")
  field(FLNK, "$(P)$(Q):RTEMPCH")
}

record(ao, "$(P)$(Q):END") {
  field(DTYP, "stream")
  field(OUT, "@OXCS_NHELIX.proto end($(P)$(Q)) $(PORT)")
  field(SDIS, "$(P)$(Q):DISABLE") 
}

record(ai, "$(P)$(Q):CSTYPE") {
  field(DESC, "Cryostream type")
  field(PINI, "YES")
  field(VAL, "0")
}
